<!--
  ========================LICENSE_START=================================
  EOMTBX - EOMasters Toolbox Basic for SNAP
  -> https://www.eomasters.org/sw/EOMTBX
  ======================================================================
  Copyright (C) 2023 - 2024 Marco Peters
  ======================================================================
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public
  License along with this program.  If not, see
  -> http://www.gnu.org/licenses/gpl-3.0.html
  =========================LICENSE_END==================================
  -->

<html>
<head>
  <title>EOMasters Toolbox Basic - S2-MSI L2A Reader - Fixed B1 Footprint</title>
  <meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
  <link href="../style/style.css" rel="stylesheet">
  <link href="../style/eomastersstyle.css" rel="stylesheet">
</head>

<body>
<table class="header">
  <tr class="header">
    <td align="left" class="header" width="40"><a href="Overview.html"><img border=0 src="../images/EomToolbox_32.png"></a>
    </td>
    <td class="header">EOMasters Toolbox Basic</td>
    <td align="right" class="header"><a
        href="nbdocs://org.esa.snap.snap.help/org/esa/snap/snap/help/docs/general/overview/SnapOverview.html"><img
        border=0 src="../images/snap_header.jpg"></a></td>
  </tr>
</table>

<h1>S2-MSI L2A Reader - Fixed B1 Footprint</h1>
<p>Since processing baseline 4.0 Copernicus provides the data of band B1 of the L2A products at the up-scaled resolution
  of 20m instead of the native 60m resolution. But the corresponding detector footprint mask (MSK_DETFOO_B1) is not
  up-scaled accordingly. This data inconsistency leads to the issue that the detector footprint is not usable in SNAP.
  Unfortunately, Copernicus considers the data as correct and does not want to change it<sup>[1]</sup>, also the SNAP
  dev team, doesn't want to correct the data to make it usable for the user<sup>[2]</sup>.</p>
<p>The toolbox provides two readers which provide a solution for this problem.</p>
<ul>
  <li><b>Scaled B1 detector footprint</b><br>This reader provides the band <code>B_detector_footprint_B1</code> at the
    new 20m resolution of B1.
  </li>
  <li><b>B1 at native resolution</b><br>This reader provides the band B1 at its native 60m resolution. And drops the
    scaled 20m resolution.
  </li>
</ul>
<p>To make use of these readers you need to use the import mechanism of SNAP. They can be found in the menu at <code>File
  / Import / Optical Sensors / Sentinel-2</code>. </p>
<div align="center"><img src="images/S2L2AB1Import.png"/></div>
<p>If you want to use the reader in a GPF graph you need to add a special read node which defines the format used to
  read the data product. The format names are <code>S2L2A_NATIVE_B1</code> and <code>S2L2A_SCALED_B1_FOOTPRINT</code>.
</p>
An example looks like:
<pre><code>  ...
  &lt;node id="ReadNode"&gt;
    &lt;operator&gt;Read&lt;/operator&gt;
    &lt;parameters&gt;
      &lt;file&gt;${s2l2aFile}&lt;/file&gt;
      &lt;formatName&gt;S2L2A_NATIVE_B1&lt;/formatName&gt;
    &lt;/parameters&gt;
  &lt;/node&gt;
  ...
</code></pre>

<h2>References</h2>
<ul>
  <li><b>[1]</b> -
    <object classid="java:eu.esa.snap.netbeans.javahelp.BrowserDisplayer">
      <param name="content"
             value="https://forum.dataspace.copernicus.eu/t/masks-not-at-same-resolution-for-b1-in-l2a/1388/2?u=marco">
      <param name="text" value="<html><u>CDSE Community Forum</u></html>">
      <param name="textFontSize" value="bigger">
    </object>
  </li>
  <li><b>[2]</b> -
    <object classid="java:eu.esa.snap.netbeans.javahelp.BrowserDisplayer">
      <param name="content"
             value="https://forum.step.esa.int/t/quality-masks-are-all-empty-for-sentinel-2/43547/7?u=marco_eom">
      <param name="text" value="<html><u>STEP Forum</u></html>">
      <param name="textFontSize" value="bigger">
    </object>
  </li>
</ul>

<footer>
  <hr>
  <table class="eom_ft">
    <tr>
      <td width="60" rowspan="2" class="eom_ft">
        <img alt="EOMasters Logo" src="../images/EOMasters_50.png">
      </td>
      <td width="*" class="eom_ft">
        <div class="eom_ft">EOMasters Toolbox Basic<br></div>
      </td>
    </tr>
    <tr>
      <td class="eom_ft"> Provided by
        <object classid="java:eu.esa.snap.netbeans.javahelp.BrowserDisplayer">
          <param name="content" value="https://www.eomasters.org/">
          <param name="text" value="<html><u>www.eomasters.org</u></html>">
          <param name="textFontSize" value="bigger">
        </object>
      </td>
    </tr>
  </table>
</footer>
</body>
</html>

