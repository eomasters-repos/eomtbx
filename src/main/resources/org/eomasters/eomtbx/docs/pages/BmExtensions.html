<!--
  ========================LICENSE_START=================================
  EOMTBX - EOMasters Toolbox for SNAP
  -> https://www.eomasters.org/sw/EOMTBX
  ======================================================================
  Copyright (C) 2023 - 2024 Marco Peters
  ======================================================================
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public
  License along with this program.  If not, see
  -> http://www.gnu.org/licenses/gpl-3.0.html
  =========================LICENSE_END==================================
  -->

<html>
<head>
  <title>EOMasters Toolbox - Band Maths Extensions</title>
  <meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
  <link href="../style/style.css" rel="stylesheet">
  <link href="../style/eomastersstyle.css" rel="stylesheet">
</head>

<body>
<table class="header">
  <tr class="header">
    <td align="left" class="header" width="40"><a
        href="Intro.html"><img border=0 src="../images/EomToolbox_32.png"></a></td>
    <td class="header">EOMasters Toolbox</td>
    <td align="right" class="header"><a
        href="nbdocs://org.esa.snap.snap.help/org/esa/snap/snap/help/docs/general/overview/SnapOverview.html"><img
        border=0 src="../images/snap_header.jpg"></a></td>
  </tr>
</table>

<h1>Band Maths Extensions</h1>
<p>These extensions provide new functionalities for the Band Maths expressions. The following functionalities are
  available:</p>
<ul>
  <li><b>Valid</b><br>
    This attribute returns true if the current pixel is valid. Valid means that the pixel value is not equal to the
    no-data value (if used) and the pixel matches the valid-pixel expression of the band. NaN values are considered as
    valid except the no-data value of the band is set to NaN. It is used as follows:<br>
    <b><code>&lt;band-name&gt;.valid</code></b> &nbsp;&nbsp;e.g.,&nbsp;&nbsp;--> <b><code>Oa10_radiance.valid</code><br></b>
  </li>
  <li><b>Map Coordinates</b><br>
    It is already possible to get the pixel (<code>X,Y</code>) and the geographic coordinates (<code>LAT,LON</code>) in
    a Band Maths Expression. With these two new symbols you can also access the map coordinates of the product scene.
    The returned coordinate represents the center of the pixel. If the scene is not reprojected to a map, the geographic
    coordinates are returned. The X and Y map coordinates are returned by the symbols: <b><code>MAPX</code></b> and
    <b><code>MAPY</code><br></b>
  </li>
  <li><b>AreValid Function</b><br>
    Similar to the <b>valid</b> attribute, this function returns true if all provided bands are valid.<br>
    It is used as follows:<br>
    <b><code>areValid(&lt;band_name&gt;, &lt;band_name&gt;, ...)</code></b> &nbsp;&nbsp;e.g.,&nbsp;&nbsp;--> <b><code>areValid(B2,
      B3, B4, B8)</code><br></b>
  </li>
  <li><b>Window Functions</b><br>
    The window is centered on the current pixel and the window size must be <b>3, 5 or 7</b>.
    NaN and invalid values are ignored. If all values in the window are NaN or invalid, the result is NaN.
    The functions are used as follows:<br>
    <b><code>wnd(&lt;band_name&gt;, &lt;window_size&gt;, "&lt;function&gt;")</code></b>
    The following functions are available:<br>
    <ul>
      <li><b>sum</b>: Sum of all valid pixels in the window<br>
        e.g.,&nbsp;&nbsp;--> <b><code>wnd(B8A, 3, "sum")</code><br></b></li>
      <li><b>min</b>: Minimum of all valid pixels in the window<br>
        e.g.,&nbsp;&nbsp;--> <b><code>wnd(B2, 3, "min")</code><br></b></li>
      <li><b>max</b>: Maximum of all valid pixels in the window<br>
        e.g.,&nbsp;&nbsp;--> <b><code>wnd(B2, 7, "max")</code><br></b></li>
      <li><b>mean</b>: Mean of all valid pixels in the window<br>
        e.g.,&nbsp;&nbsp;--> <b><code>wnd(B2, 7, "mean")</code><br></b></li>
      <li><b>median</b>: Median of all valid pixels in the window<br>
        e.g.,&nbsp;&nbsp;--> <b><code>wnd(B3, 5, "median")</code><br></b></li>
    </ul>
    The function can be selected from the drop-down list:<br>
    <div align="center"><br><img src="images/BmWndFunction.png" height="263" width="277"/></div>
  </li>
</ul>

<footer>
  <hr>
  <table class="eom_ft">
    <tr>
      <td rowspan="2" class="eom_ft">
        <img alt="EOMasters Logo" src="../images/EOMasters_50.png">
      </td>
      <td width="100%" class="eom_ft">
        <div class="eom_ft">EOMasters Toolbox<br></div>
      </td>
    </tr>
    <tr>
      <td class="eom_ft"> Provided by
        <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
          <param name="content" value="https://www.eomasters.org/">
          <param name="text" value="<html><u>www.eomasters.org</u></html>">
          <param name="textFontSize" value="bigger">
        </object>
      </td>
    </tr>
  </table>
</footer>
</body>
</html>

